#!/usr/bin/python3
# -*- coding: utf-8 -*-


#Sergio Iván Galindo Díaz
#Programa que escanea puertos
#Curso: Pentest

import sys
import socket

#nos sirve para indicar al usuario como debe ejecutar el script, ya que el script recibe ip,puertoInicial,puertoFinal
if len(sys.argv)!= 4:
	print("Debes ejecutar Scan.py <ip> <PortStart> <PortEnd>")

#Asignación de la información introducida del usuario a variables
IP= sys.argv[1]
Start= int(sys.argv[2])
End= int(sys.argv[3])

print('Conectando a->',IP, 'del puerto->', Start,'al puerto->', End)
#Establece la conexión
connection = socket.socket()
#Va verifcando que puerto esta abierto y cual no
for x in range(Start,End+1):
	try:
		connection.connect((IP,x))
		print("Puerto-> %s Abierto" % x)
	except:
		print("Puerto-> %s Cerrado" % x)
#Cerrando conexión
connection.close()
